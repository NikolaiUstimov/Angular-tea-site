"use strict";(self.webpackChunkangular_tea_site=self.webpackChunkangular_tea_site||[]).push([[884],{2884:(x,a,s)=>{s.r(a),s.d(a,{OrdersModule:()=>Z});var m=s(6895),l=s(8616),o=s(433),e=s(1571),d=s(4736);function c(t,n){if(1&t&&(e.TgZ(0,"p",28),e._uU(1),e.qZA()),2&t){const r=e.oxw(2);e.xp6(1),e.Oqu(r.responseErrorText)}}function p(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"article",3)(1,"article",4)(2,"h2",5),e._uU(3,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),e.qZA()(),e.TgZ(4,"form",6)(5,"fieldset",7)(6,"label",8),e._uU(7,"\u0418\u043c\u044f"),e.qZA(),e._UZ(8,"input",9),e.qZA(),e.TgZ(9,"fieldset",7)(10,"label",10),e._uU(11,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),e.qZA(),e._UZ(12,"input",11),e.qZA(),e.TgZ(13,"fieldset",7)(14,"label",12),e._uU(15,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),e.qZA(),e.TgZ(16,"input",13),e.NdJ("keydown",function(i){e.CHM(r);const g=e.oxw();return e.KtG(g.preventSpace(i))}),e.qZA()(),e.TgZ(17,"fieldset",14)(18,"label",15),e._uU(19,"\u0421\u0442\u0440\u0430\u043d\u0430"),e.qZA(),e._UZ(20,"input",16),e.qZA(),e.TgZ(21,"fieldset",14)(22,"label",17),e._uU(23,"\u0418\u043d\u0434\u0435\u043a\u0441"),e.qZA(),e._UZ(24,"input",18),e.qZA(),e.TgZ(25,"fieldset",14)(26,"label",19),e._uU(27,"\u0410\u0434\u0440\u0435\u0441"),e.qZA(),e._UZ(28,"input",20),e.qZA(),e.TgZ(29,"fieldset",14)(30,"label",21),e._uU(31,"\u0427\u0430\u0439"),e.qZA(),e._UZ(32,"input",22),e.qZA(),e.TgZ(33,"fieldset",23)(34,"label",24),e._uU(35,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),e.qZA(),e._UZ(36,"textarea",25),e.qZA(),e.TgZ(37,"fieldset",23)(38,"button",26),e.NdJ("click",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.onSubmit())}),e._uU(39,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),e.qZA(),e.YNc(40,c,2,1,"p",27),e.qZA()()()}if(2&t){const r=e.oxw();e.xp6(4),e.Q6J("formGroup",r.orderForms),e.xp6(28),e.Q6J("readonly",r.inputReadonly),e.xp6(8),e.Q6J("ngIf",r.responseError)}}function f(t,n){1&t&&(e.TgZ(0,"article",29),e._uU(1,"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437!"),e.qZA())}const h=[{path:"",component:(()=>{class t{constructor(r,u,i){this.formBuilder=r,this.route=u,this.productService=i,this.productTitle="",this.inputReadonly=!1,this.isVisibleForm=!0,this.responseError=!1,this.responseErrorText="",this.subscriptionsParams=null,this.subscriptionsOrder=null,this.orderForms=this.formBuilder.group({name:this.formBuilder.control("",{validators:[o.kI.required,o.kI.pattern("^[\u0410-\u042f\u0401][\u0430-\u044f\u0451]+$")],updateOn:"blur"}),last_name:this.formBuilder.control("",{validators:[o.kI.required,o.kI.pattern("^[\u0410-\u042f\u0401][\u0430-\u044f\u0451]+$")],updateOn:"blur"}),phone:this.formBuilder.control("",{validators:[o.kI.required,o.kI.pattern("^\\+?\\d{11}$")],updateOn:"blur"}),country:this.formBuilder.control("",{validators:[o.kI.required],updateOn:"blur"}),zip:this.formBuilder.control("",{validators:[o.kI.required,o.kI.pattern("^\\d{6}$")],updateOn:"blur"}),product:this.formBuilder.control(""),address:this.formBuilder.control("",{validators:[o.kI.required,o.kI.pattern("^[\u0430-\u044f\u0410-\u042f0-9,\\.\\s]+$")],updateOn:"blur"}),comment:this.formBuilder.control("")})}preventSpace(r){" "===r.key&&r.preventDefault()}ngOnInit(){this.subscriptionsParams=this.route.paramMap.subscribe(r=>{this.productTitle=r.get("product"),this.orderForms.patchValue({product:this.productTitle}),this.inputReadonly=!0})}onSubmit(){if(!this.orderForms.valid)return this.orderForms.markAllAsTouched(),this.responseError=!0,void(this.responseErrorText="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f!");this.subscriptionsOrder=this.productService.createOrder(this.orderForms.value).subscribe({next:u=>{u.success&&!u.message?(this.inputReadonly=!1,this.orderForms.reset(),this.isVisibleForm=!1):(this.responseError=!0,this.responseErrorText=u.message||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.")},error:u=>{this.responseError=!0,this.responseErrorText=u.message}})}ngOnDestroy(){this.subscriptionsParams&&this.subscriptionsParams?.unsubscribe(),this.subscriptionsOrder&&this.subscriptionsOrder?.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(o.qu),e.Y36(l.gz),e.Y36(d.s))},t.\u0275cmp=e.Xpm({type:t,selectors:[["order-component"]],decls:3,vars:2,consts:[["id","order",1,"row","justify-content-center","mb-5","text-append"],["class","col-12 col-sm-12 col-lg-6 hide",4,"ngIf"],["class","m-auto fs-2 text-center",4,"ngIf"],[1,"col-12","col-sm-12","col-lg-6","hide"],[1,"col-12","hide"],[1,"text-center","mb-5"],["action","","id","form",1,"row","g-3","mb-5",3,"formGroup"],[1,"col-md-4"],["for","inputName",1,"form-label"],["type","text","name","name","id","inputName","formControlName","name",1,"form-control"],["for","inputLastName",1,"form-label"],["type","text","name","lastName","id","inputLastName","formControlName","last_name",1,"form-control"],["for","inputPhone",1,"form-label"],["type","tel","name","phone","id","inputPhone","formControlName","phone","maxlength","12",1,"form-control",3,"keydown"],[1,"col-md-6"],["for","inputState",1,"form-label"],["type","text","name","country","id","inputState","formControlName","country",1,"form-control"],["for","inputIndex",1,"form-label"],["type","number","name","zip","id","inputIndex","maxlength","6","formControlName","zip",1,"form-control"],["for","inputAddress",1,"form-label"],["type","text","name","address","id","inputAddress","formControlName","address",1,"form-control"],["for","inputTea",1,"form-label"],["type","text","name","product","id","inputTea","formControlName","product",1,"form-control",3,"readonly"],[1,"col-md-12"],["for","inputComment",1,"form-label"],["type","text","name","comment","id","inputComment","formControlName","comment",1,"form-control"],["type","submit",1,"btn","btn-primary","px-5",3,"click"],["class","text-danger mt-2",4,"ngIf"],[1,"text-danger","mt-2"],[1,"m-auto","fs-2","text-center"]],template:function(r,u){1&r&&(e.TgZ(0,"section",0),e.YNc(1,p,41,3,"article",1),e.YNc(2,f,2,0,"article",2),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngIf",u.isVisibleForm),e.xp6(1),e.Q6J("ngIf",!u.isVisibleForm))},dependencies:[m.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.nD,o.sg,o.u]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(h),l.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,l.Bz,o.UX,b]}),t})()}}]);